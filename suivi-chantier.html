<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Suivi chantier</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 900px; margin: 20px auto; padding: 10px; }
    ul { padding: 0; list-style: none; }
    li { padding: 8px 0; border-bottom: 1px solid #ccc; display: flex; align-items: center; justify-content: space-between; }
    label { display: flex; align-items: center; gap: 5px; }
    button { margin-left: 10px; background-color: #e74c3c; border: none; color: white; padding: 5px 10px; border-radius: 4px; cursor: pointer; }
    button:hover { background-color: #c0392b; }
  </style>
</head>
<body>

  <h1>Suivi de chantier</h1>

  <ul id="folders-list"></ul>

  <script src="folders.js"></script>
  <script>
    const foldersList = document.getElementById('folders-list');

    function renderFolders() {
      const folders = loadFolders();
      foldersList.innerHTML = '';

      if (folders.length === 0) {
        foldersList.innerHTML = '<li>Aucun dossier créé.</li>';
        return;
      }

      folders.forEach(folder => {
        const li = document.createElement('li');

        const nameSpan = document.createElement('span');
        nameSpan.textContent = folder.name;

        const label = document.createElement('label');
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.checked = folder.checkedStates['suivi-chantier'] || false;
        checkbox.onchange = () => {
          updateFolderCheck(folder.id, 'suivi-chantier', checkbox.checked);
        };
        label.appendChild(checkbox);
        label.appendChild(document.createTextNode(' Suivi chantier'));

        const delBtn = document.createElement('button');
        delBtn.textContent = 'Supprimer';
        delBtn.onclick = () => {
          if (confirm(`Voulez-vous vraiment supprimer le dossier "${folder.name}" ?`)) {
            deleteFolder(folder.id);
            renderFolders();
          }
        };

        li.appendChild(nameSpan);
        li.appendChild(label);
        li.appendChild(delBtn);
        foldersList.appendChild(li);
      });
    }

    renderFolders();
  </script>

</body>
</html>
